<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Api Meteo</title>
</head>
<body>
    <script>
// Fonction asynchrone pour obtenir les coordonnées de la ville
async function getCoordinates(city) {
  try {
    const response = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1&language=fr&format=json`);
    const data = await response.json();
    const obj = data.results[0];

    if (obj.latitude && obj.longitude) {
      return {
        latitude: obj.latitude,
        longitude: obj.longitude
      };
    } else {
      throw new Error('Coordonnées non disponibles pour la ville spécifiée.');
    }
  } catch (error) {
    console.error('Erreur de géocodage :', error);
    throw error;
  }
}

// Fonction asynchrone pour obtenir la température en fonction des coordonnées
async function getTemperature(city) {
  try {
    const coordinates = await getCoordinates(city);

    const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${coordinates.latitude}&longitude=${coordinates.longitude}&hourly=temperature_2m`);

    const data = await response.json();

    if (data.hourly && data.hourly.temperature_2m && data.hourly.temperature_2m.length > 0) {
      const temperature = data.hourly.temperature_2m[0]; // Utilisez l'indice approprié en fonction de vos besoins.
      return temperature;
    } else {
      throw new Error('Données de température non disponibles pour la ville spécifiée.');
    }
  } catch (error) {
    console.error('Erreur lors de la récupération de la température :', error);
    throw error;
  }
}

// Exemple d'utilisation
const city = 'Nantes';
getTemperature(city)
  .then(temperature => console.log(`La température actuelle à ${city} est de ${temperature}°C.`))
  .catch(error => console.error('Erreur générale :', error));



    </script>
    
</body>
</html>